// Importar Firebase v10
import { initializeApp } from "firebase/app";
import { getFirestore, doc, setDoc, updateDoc } from "firebase/firestore";

// Configuración de tu proyecto Firebase
const firebaseConfig = {
  apiKey: "AIzaSyDo3cgRT87JQkV9kgJG2mrPnUkb5HugH9Q",
  authDomain: "rifasammuel.firebaseapp.com",
  projectId: "rifasammuel",
  storageBucket: "rifasammuel.firebasestorage.app",
  messagingSenderId: "707645550462",
  appId: "1:707645550462:web:42735685340fb79e5d8d2f",
  measurementId: "G-W3HY4MHHV4"
};

// Inicializar Firebase
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// Lista de números disponibles
const numeros_disponibles = [
  "079", "080", "088",
  "092", "108", "109", "126", "181", "182",
  "183", "185", "193",
  "194", "243", "244",
  "245", "250", "268", "335", "337", "452", "453", "460", "471",
  "530", "531", "534",
  "542", "554", "555", "607", "608", "609", "615", "618", "622",
  "627", "723", "724",
  "725", "731", "746", "747", "749", "841", "842", "853", "905",
  "906", "921"
];

// Función para poblar la colección
async function crearColeccionNumeros() {
  for (let numero of numeros_disponibles) {
    await setDoc(doc(db, "numerosrifa", numero), {
      numero: numero,
      nombre: "",
      direccion: "",
      telefono: "",
      reservado: false
    });
    console.log(`Número ${numero} creado`);
  }
}

// Función para reservar un número
async function reservarNumero(numero, nombre, direccion, telefono) {
  const docRef = doc(db, "numerosrifa", numero);
  await updateDoc(docRef, {
    nombre: nombre,
    direccion: direccion,
    telefono: telefono,
    reservado: true
  });
  console.log(`Número ${numero} reservado para ${nombre}`);
}

// Ejecución inicial
crearColeccionNumeros();

// Ejemplo para reservar un número
// reservarNumero("079", "Juan Pérez", "Calle 123", "3001234567");
